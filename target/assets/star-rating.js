(function(e){"use strict";String.prototype.replaceAll=function(e,t){return this.split(e).join(t)};var t=0,n=5,r=.5,i=function(t,n){return t===null||t===undefined||t.length===0||n&&e.trim(t)===""},s=function(e,t){e.removeClass(t).addClass(t)},o=function(e,t,n){var r=i(e.data(t))?e.attr(t):e.data(t);return r?r:n[t]},u=function(e){var t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return!t?0:Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0))},a=function(e,t){return parseFloat(e.toFixed(t))},f=function(t,n){this.$element=e(t);this.init(n)};f.prototype={constructor:f,_parseAttr:function(e,s){var u=this,a=u.$element;if(a.attr("type")==="range"||a.attr("type")==="number"){var f=o(a,e,s),l,c;switch(e){case"min":l=t;break;case"max":l=n;break;default:l=r}c=i(f)?l:f;return parseFloat(c)}return parseFloat(s[e])},setDefault:function(e,t){var n=this;if(i(n[e])){n[e]=t}},getPosition:function(e){return e.pageX-this.$rating.offset().left},listen:function(){var t=this,n,r;t.initTouch();t.$rating.on("click",function(e){if(t.inactive){return}n=t.getPosition(e);t.setStars(n);t.$element.trigger("change").trigger("rating.change",[t.$element.val(),t.$caption.html()]);t.starClicked=true});t.$rating.on("mousemove",function(e){if(!t.hoverEnabled||t.inactive){return}t.starClicked=false;n=t.getPosition(e);r=t.calculate(n);t.toggleHover(r);t.$element.trigger("rating.hover",[r.val,r.caption,"stars"])});t.$rating.on("mouseleave",function(){if(!t.hoverEnabled||t.inactive||t.starClicked){return}r=t.cache;t.toggleHover(r);t.$element.trigger("rating.hoverleave",["stars"])});t.$clear.on("mousemove",function(){if(!t.hoverEnabled||t.inactive||!t.hoverOnClear){return}t.clearClicked=false;var e='<span class="'+t.clearCaptionClass+'">'+t.clearCaption+"</span>",n=t.clearValue,i=t.getWidthFromValue(n);r={caption:e,width:i,val:n};t.toggleHover(r);t.$element.trigger("rating.hover",[n,e,"clear"])});t.$clear.on("mouseleave",function(){if(!t.hoverEnabled||t.inactive||t.clearClicked||!t.hoverOnClear){return}r=t.cache;t.toggleHover(r);t.$element.trigger("rating.hoverleave",["clear"])});t.$clear.on("click",function(){if(!t.inactive){t.clear();t.clearClicked=true}});e(t.$element[0].form).on("reset",function(){if(!t.inactive){t.reset()}})},destroy:function(){var t=this,n=t.$element;if(!i(t.$container)){t.$container.before(n).remove()}e.removeData(n.get(0));n.off("rating").removeClass("hide")},create:function(e){var t=this,n=t.$element;e=e||t.options||{};t.destroy();n.rating(e)},setTouch:function(e,t){var n=this,r="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch;if(!r||n.inactive){return}var i=e.originalEvent,s=i.touches||i.changedTouches,o=n.getPosition(s[0]);if(t){n.setStars(o);n.$element.trigger("change").trigger("rating.change",[n.$element.val(),n.$caption.html()]);n.starClicked=true}else{var u=n.calculate(o),a=u.val<=n.clearValue?n.fetchCaption(n.clearValue):u.caption,f=n.getWidthFromValue(n.clearValue),l=u.val<=n.clearValue?n.rtl?100-f+"%":f+"%":u.width;n.$caption.html(a);n.$stars.css("width",l)}},initTouch:function(){var e=this;e.$rating.on("touchstart touchmove touchend",function(t){var n=t.type==="touchend";e.setTouch(t,n)})},initSlider:function(e){var s=this;if(i(s.$element.val())){s.$element.val(0)}s.initialValue=s.$element.val();s.setDefault("min",s._parseAttr("min",e));s.setDefault("max",s._parseAttr("max",e));s.setDefault("step",s._parseAttr("step",e));if(isNaN(s.min)||i(s.min)){s.min=t}if(isNaN(s.max)||i(s.max)){s.max=n}if(isNaN(s.step)||i(s.step)||s.step===0){s.step=r}s.diff=s.max-s.min},init:function(t){var n=this,r=n.$element,o,u,a;n.options=t;e.each(t,function(e,t){n[e]=t});n.starClicked=false;n.clearClicked=false;n.initSlider(t);n.checkDisabled();n.setDefault("rtl",r.attr("dir"));if(n.rtl){r.attr("dir","rtl")}o=n.glyphicon?"":"★";n.setDefault("symbol",o);n.setDefault("clearButtonBaseClass","clear-rating");n.setDefault("clearButtonActiveClass","clear-rating-active");n.setDefault("clearValue",n.min);s(r,"form-control hide");n.$clearElement=i(t.clearElement)?null:e(t.clearElement);n.$captionElement=i(t.captionElement)?null:e(t.captionElement);if(n.$rating===undefined&&n.$container===undefined){n.$rating=e(document.createElement("div")).html('<div class="rating-stars"></div>');n.$container=e(document.createElement("div"));n.$container.before(n.$rating).append(n.$rating);r.before(n.$container).appendTo(n.$rating)}n.$stars=n.$rating.find(".rating-stars");n.generateRating();n.$clear=!i(n.$clearElement)?n.$clearElement:n.$container.find("."+n.clearButtonBaseClass);n.$caption=!i(n.$captionElement)?n.$captionElement:n.$container.find(".caption");n.setStars();n.listen();if(n.showClear){n.$clear.attr({"class":n.getClearClass()})}u=r.val();a=n.getWidthFromValue(u);n.cache={caption:n.$caption.html(),width:(n.rtl?100-a:a)+"%",val:u};r.removeClass("rating-loading")},checkDisabled:function(){var e=this;e.disabled=o(e.$element,"disabled",e.options);e.readonly=o(e.$element,"readonly",e.options);e.inactive=e.disabled||e.readonly},getClearClass:function(){return this.clearButtonBaseClass+" "+(this.inactive?"":this.clearButtonActiveClass)},generateRating:function(){var e=this,t=e.renderClear(),n=e.renderCaption(),r=e.rtl?"rating-container-rtl":"rating-container",o=e.getStars();if(e.glyphicon){r+=(e.symbol===""?" rating-gly-star":" rating-gly")+e.ratingClass}else{r+=i(e.ratingClass)?" rating-uni":" "+e.ratingClass}e.$rating.attr("class",r);e.$rating.attr("data-content",o);e.$stars.attr("data-content",o);r=e.rtl?"star-rating-rtl":"star-rating";e.$container.attr("class",r+" rating-"+e.size);e.$container.removeClass("rating-active rating-disabled");if(e.inactive){e.$container.addClass("rating-disabled")}else{e.$container.addClass("rating-active")}if(e.$caption===undefined&&e.$clear===undefined){if(e.rtl){e.$container.prepend(n).append(t)}else{e.$container.prepend(t).append(n)}}if(!i(e.containerClass)){s(e.$container,e.containerClass)}},getStars:function(){var e=this,t=e.stars,n="",r;for(r=1;r<=t;r++){n+=e.symbol}return n},renderClear:function(){var e=this,t;if(!e.showClear){return""}t=e.getClearClass();if(!i(e.$clearElement)){s(e.$clearElement,t);e.$clearElement.attr({title:e.clearButtonTitle}).html(e.clearButton);return""}return'<div class="'+t+'" title="'+e.clearButtonTitle+'">'+e.clearButton+"</div>"},renderCaption:function(){var e=this,t=e.$element.val(),n;if(!e.showCaption){return""}n=e.fetchCaption(t);if(!i(e.$captionElement)){s(e.$captionElement,"caption");e.$captionElement.attr({title:e.clearCaption}).html(n);return""}return'<div class="caption">'+n+"</div>"},fetchCaption:function(e){var t=this,n=parseFloat(e),r,s,o,u,a=t.starCaptions,f=t.starCaptionClasses,l;u=typeof f==="function"?f(n):f[n];o=typeof a==="function"?a(n):a[n];s=i(o)?t.defaultCaption.replaceAll("{rating}",n):o;r=i(u)?t.clearCaptionClass:u;l=n===t.clearValue?t.clearCaption:s;return'<span class="'+r+'">'+l+"</span>"},getWidthFromValue:function(e){var t=this,n=t.min,r=t.max;if(e<=n||n===r){return 0}if(e>=r){return 100}return(e-n)*100/(r-n)},getValueFromPosition:function(e){var t=this,n=u(t.step),r,i,s=t.$rating.width();i=t.diff*e/(s*t.step);i=t.rtl?Math.floor(i):Math.ceil(i);r=a(parseFloat(t.min+i*t.step),n);r=Math.max(Math.min(r,t.max),t.min);return t.rtl?t.max-r:r},toggleHover:function(e){var t=this,n,r,i;if(t.hoverChangeCaption){i=e.val<=t.clearValue?t.fetchCaption(t.clearValue):e.caption;t.$caption.html(i)}if(t.hoverChangeStars){n=t.getWidthFromValue(t.clearValue);r=e.val<=t.clearValue?t.rtl?100-n+"%":n+"%":e.width;t.$stars.css("width",r)}},calculate:function(e){var t=this,n=i(t.$element.val())?0:t.$element.val(),r=arguments.length?t.getValueFromPosition(e):n,s=t.fetchCaption(r),o=t.getWidthFromValue(r);if(t.rtl){o=100-o}o+="%";return{caption:s,width:o,val:r}},setStars:function(e){var t=this,n=arguments.length?t.calculate(e):t.calculate();t.$element.val(n.val);t.$stars.css("width",n.width);t.$caption.html(n.caption);t.cache=n},clear:function(){var e=this,t='<span class="'+e.clearCaptionClass+'">'+e.clearCaption+"</span>";e.$stars.removeClass("rated");if(!e.inactive){e.$caption.html(t)}e.$element.val(e.clearValue);e.setStars();e.$element.trigger("rating.clear")},reset:function(){var e=this;e.$element.val(e.initialValue);e.setStars();e.$element.trigger("rating.reset")},update:function(e){var t=this;if(!arguments.length){return}t.$element.val(e);t.setStars()},refresh:function(t){var n=this;if(!arguments.length){return}n.$rating.off("rating");n.$clear.off();n.init(e.extend(n.options,t));if(n.showClear){n.$clear.show()}else{n.$clear.hide()}if(n.showCaption){n.$caption.show()}else{n.$caption.hide()}n.$element.trigger("rating.refresh")}};e.fn.rating=function(t){var n=Array.apply(null,arguments);n.shift();return this.each(function(){var r=e(this),i=r.data("rating"),s=typeof t==="object"&&t;if(!i){r.data("rating",i=new f(this,e.extend({},e.fn.rating.defaults,s,e(this).data())))}if(typeof t==="string"){i[t].apply(i,n)}})};e.fn.rating.defaults={stars:5,glyphicon:true,symbol:null,ratingClass:"",disabled:false,readonly:false,rtl:false,size:"md",showClear:true,showCaption:true,defaultCaption:"{rating} Stars",starCaptions:{.5:"Half Star",1:"One Star",1.5:"One & Half Star",2:"Two Stars",2.5:"Two & Half Stars",3:"Three Stars",3.5:"Three & Half Stars",4:"Four Stars",4.5:"Four & Half Stars",5:"Five Stars"},starCaptionClasses:{.5:"label label-danger",1:"label label-danger",1.5:"label label-warning",2:"label label-warning",2.5:"label label-info",3:"label label-info",3.5:"label label-primary",4:"label label-primary",4.5:"label label-success",5:"label label-success"},clearButton:'<i class="glyphicon glyphicon-minus-sign"></i>',clearButtonTitle:"Clear",clearButtonBaseClass:"clear-rating",clearButtonActiveClass:"clear-rating-active",clearCaption:"Not Rated",clearCaptionClass:"label label-default",clearValue:null,captionElement:null,clearElement:null,containerClass:null,hoverEnabled:true,hoverChangeCaption:true,hoverChangeStars:true,hoverOnClear:true};e.fn.rating.Constructor=f;e("input.rating").addClass("rating-loading");e(document).ready(function(){var t=e("input.rating"),n=Object.keys(t).length;if(n>0){t.rating()}})})(window.jQuery)